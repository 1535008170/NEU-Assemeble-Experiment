DSEG SEGMENT
    DATA1 DB 56H,34H,12H
    DATA2 DB 78H,56H,34H
    LEN DW 3
    RESULT DB 3 DUP(0)
DSEG ENDS

SSEG SEGMENT
    STK DB 20 DUP(0)
SSEG ENDS

CSEG SEGMENT
    ASSUME DS:DSEG,SS:SSEG,CS:CSEG

ABS PROC
    PUSH AX
    PUSH SI
    PUSH CX
    MOV CX,LEN
    ADD SI,CX
    DEC SI
    MOV AL,[SI]
    TEST AL,AL
    JNS EXIT1;正数就直接结束
    INC SI
    SUB SI,CX
    STC
LOOP1:
    NOT BYTE PTR[SI]
    ADC BYTE PTR[SI],0
    INC SI
    LOOP LOOP1
EXIT1:
    POP CX
    POP SI
    POP AX
    RET
ABS ENDP

MADD PROC
    PUSH AX
    PUSH SI
    PUSH DI
    ;PUSH CX
    PUSH BX
    MOV CX,LEN
    CLC
LOOP2:
    MOV AL,[SI]
    ADC AL,[DI]
    MOV [BX],AL
    INC SI
    INC DI
    INC BX
    LOOP LOOP2
    POP BX
    ;POP CX
    POP DI
    POP SI
    POP AX
    RET
MADD ENDP

START:
    MOV AX,DSEG
    MOV DS,AX
    MOV AX,SSEG
    MOV SS,AX
    MOV SP,SIZE STK

    MOV CX,LEN

    LEA SI,DATA1
    CALL ABS
    LEA SI,DATA2
    CALL ABS
    LEA DI,DATA1
    LEA BX,RESULT
    CALL MADD
    MOV AH,4CH
    INT 21H
CSEG ENDS
END START
